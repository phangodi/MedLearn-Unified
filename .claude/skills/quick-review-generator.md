# Quick Review Generator Skill

Generate structured Quick Review content for physiology topics. This content displays flashcard-style study materials that can later be added to users' personal flashcard decks.

## Important: Output Format

**DO NOT generate HTML strings.** Generate **structured JSON blocks** that the `QuickReviewContent.jsx` component renders with CSS.

This approach guarantees consistent styling and eliminates HTML rendering bugs.

---

## Block Types Reference

```javascript
// Supported block types - USE EXACT PROPERTY NAMES:
{ type: 'header', text: 'Section Title', critical: false }
{ type: 'paragraph', text: 'Content text', critical: false }
{ type: 'keypoint', text: 'Important highlighted point', critical: true }
{ type: 'list', intro: 'Introduction:', items: ['Item 1', 'Item 2'], critical: false }
{ type: 'steps', intro: 'Process:', items: ['Step 1', 'Step 2'], critical: false }
{ type: 'comparison', left: { title: 'A', items: [...] }, right: { title: 'B', items: [...] } }
{ type: 'formula', formula: 'E = mc²', explanation: 'Energy equation', critical: false }
{ type: 'table', headers: ['Col1', 'Col2'], rows: [['a', 'b'], ['c', 'd']] }
{ type: 'clinical', text: 'Clinical relevance note' }
```

**⚠️ CRITICAL: Use exact property names!**
- Use `text:` NOT `content:` for header, paragraph, keypoint, clinical
- Use `intro:` NOT `title:` for list and steps blocks
- Comparison must have `left:` and `right:` objects, each with `title:` and `items:`

### Block Styling (handled by CSS)

| Type | Appearance |
|------|------------|
| `header` | Navy gradient banner, white text, rounded corners |
| `paragraph` | Standard body text |
| `keypoint` | Purple left border accent, light background |
| `list` | Purple bullet arrows |
| `steps` | Purple numbered list |
| `comparison` | Side-by-side: blue (left) vs red (right) tinted boxes |
| `formula` | Navy banner, centered large text |
| `table` | Gray header, bordered rows |
| `clinical` | Yellow background callout |

### Critical Content

Add `critical: true` to blocks containing exam-critical information. This renders text in red (#dc2626).

---

## Content Guidelines

### 1. Be Concise
- Quick Review is for rapid review, not comprehensive study
- Distill each LO to its essential points
- Use abbreviations where appropriate (µm, Hb, RBC, etc.)

### 2. Choose Appropriate Blocks
- **Comparison**: When contrasting two things (high vs low, normal vs abnormal)
- **Formula**: For equations, calculations, formulas
- **Table**: For reference values, multi-attribute comparisons
- **Steps**: For processes, sequences, pathways
- **List**: For features, characteristics, factors
- **Keypoint**: For the single most important takeaway
- **Clinical**: For practical/clinical significance

### 3. Structure Each LO
Typical structure:
1. `header` - Descriptive title (not the LO question)
2. Core content blocks (2-4 blocks)
3. `keypoint` or `clinical` - Summary/significance

### 4. CRITICAL: Recognize Multiple Mechanisms/Factors/Types

**When the content mentions "X mechanisms", "X factors", "X types", etc., you MUST create SEPARATE sections for each one.**

❌ **WRONG** - All mechanisms in one list:
```javascript
{ type: 'steps', intro: 'Three mechanisms:', items: [
  'Mechanism 1: description...',
  '→ detail of mechanism 1',
  '→ more details',
  'Mechanism 2: description...',
  '→ detail of mechanism 2',
  'Mechanism 3: description...'
]}
```

✅ **CORRECT** - Each mechanism gets its own section:
```javascript
{ type: 'list', intro: 'Three mechanisms affect this:', items: [
  'Mechanism 1: brief summary',
  'Mechanism 2: brief summary',
  'Mechanism 3: brief summary'
]},
{ type: 'steps', intro: 'Mechanism 1 - Axial Migration:', items: [
  'Step 1...',
  'Step 2...'
]},
{ type: 'steps', intro: 'Mechanism 2 - Reduced Hematocrit:', items: [
  'Step 1...',
  'Step 2...'
]},
{ type: 'steps', intro: 'Mechanism 3 - RBC Deformability:', items: [
  'Step 1...',
  'Step 2...'
]}
```

**Pattern Recognition:**
- "Three mechanisms explain..." → Create 3 separate sections
- "Five factors affect..." → Create 5 separate sections
- "Two types of..." → Use comparison block OR two separate sections
- "Four stages of..." → Could be one `steps` block if truly sequential

**Ask yourself**: Are these items truly sequential steps in ONE process? Or are they PARALLEL concepts that should be separated?

---

## Output File Structure

```javascript
/**
 * Quick Review content for Topic X - [Title]
 * Auto-generated by Quick Review Generator
 */
const topicXQuickReview = {
  topicId: 'topic-X',
  topicNumber: X,
  learningObjectives: {
    'lo-1': {
      title: 'Original LO title from topic file',
      isCritical: false, // from topic file
      blocks: [
        // 3-6 blocks per LO
      ]
    },
    'lo-2': {
      // ...
    }
  }
};

export default topicXQuickReview;
```

---

## Agent Instructions

When invoked with "Generate Quick Review content for Topic X":

### Step 1: Read Source Files
Read the topic file to understand the content:
```
client/src/apps/physiology/data/Topics/topicX.js
```

### Step 2: Count ALL Learning Objectives
**CRITICAL: You MUST generate content for EVERY learning objective in the topic.**
Count the total number of LOs (typically 5-8 per topic) and process ALL of them.

### Step 3: Analyze Each Learning Objective
For EACH LO in the topic:
1. Read the title, keyPoints, officialDefinitions, and examAnswer
2. Identify the core concepts to convey
3. Decide which block types best present the information
4. Note if `isCritical: true` (mark key blocks as critical)

### Step 4: Generate Blocks
For EACH LO, create 3-6 blocks that:
- Start with a descriptive `header` (not the LO question)
- Present key information using appropriate block types
- End with a `keypoint` or `clinical` summary

### Step 5: Write Output File
Save to:
```
client/src/apps/physiology/data/QuickReview/topicX-quickreview.js
```

### Step 6: Update Index File
**IMPORTANT:** After creating the topic file, update the index:
```
client/src/apps/physiology/data/QuickReview/index.js
```

Add the import and export:
```javascript
import topicXQuickReview from './topicX-quickreview';

// In quickReviewData object:
'topic-X': topicXQuickReview,
```

### Step 7: Report Completion
Report:
- Total number of LOs in topic
- Number of LOs processed (MUST match total)
- Block types used
- Confirmation files were saved and index updated

---

## Example: Converting LO Content to Blocks

### Input (from topic file):
```javascript
{
  id: 'lo-3',
  isCritical: true,
  title: 'Define MCH, MCHC, MCV and give their formulas.',
  keyPoints: [
    'MCH: Average hemoglobin per RBC; 29 pg; Hb×10/RBC',
    'MCHC: Hb concentration in packed RBCs; 333 g/L; Hb×100/Hct',
    'MCV: Average RBC volume; 94 fL; Hct×10/RBC'
  ]
}
```

### Output (Quick Review blocks):
```javascript
'lo-3': {
  title: 'Define MCH, MCHC, MCV and give their formulas.',
  isCritical: true,
  blocks: [
    { type: 'header', text: 'RBC Indices: MCH, MCHC, MCV', critical: true },
    { type: 'comparison',
      left: {
        title: 'MCH (Mean Corpuscular Hb)',
        items: ['Average Hb per RBC', 'Normal: 29 pg', 'Formula: Hb×10÷RBC']
      },
      right: {
        title: 'MCHC (Mean Corpuscular Hb Conc)',
        items: ['Hb concentration in packed RBCs', 'Normal: 333 g/L', 'Formula: Hb×100÷Hct']
      }
    },
    { type: 'formula', formula: 'MCV = Hct(%) × 10 ÷ RBC', explanation: 'Average RBC size (normal: 94 fL)' },
    { type: 'keypoint', text: 'Low MCV = microcytic (iron def), High MCV = macrocytic (B12/folate)', critical: true }
  ]
}
```

---

## Quality Checklist

Before saving, verify:
- [ ] All LOs from topic file are included
- [ ] Each LO has 3-6 blocks
- [ ] Critical LOs have `isCritical: true` and critical blocks
- [ ] Block types are appropriate for content
- [ ] Content is concise (review format, not comprehensive)
- [ ] No HTML strings in output (only structured blocks)
- [ ] File exports correctly as ES module

---

## Batch Processing

To generate for multiple topics:
```
"Generate Quick Review content for Topics 9, 10, 11"
```

Process each topic sequentially, reading its file once and generating all LOs before moving to the next topic.
